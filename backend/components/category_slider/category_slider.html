<div class="flex justify-center">
    <div id="category-carousel" class="splide mx-auto" slides-count="{{ categories_context|length }}">
        <div class="splide__track">
            <ul class="splide__list">
                {% for category in categories_context %}
                <li class="splide__slide">
                    {% if category.show_navbar %}
                    <div class="group">
                        <a href="{{ category.link }}">
                            <!-- Max width control -->
                            {% if current_category == category.name %}
                            <div class="w-24 h-24 rounded-xl p-2 border bg-accent bg-opacity-50" id="selected-category"
                                category-index="{{ forloop.counter }}">
                                {% if category.icon %}
                                <img src="{{ category.icon.url }}">
                                {% endif %}
                                <div class="text-center text-sm">{{ category.name }}</div>
                            </div>
                            {% else %}
                            <div class="w-24 h-24 rounded-xl p-2 border bg-sec">
                                {% if category.icon %}
                                <img src="{{ category.icon.url }}">
                                {% endif %}
                                <div class="text-center text-sm">{{ category.name }}</div>
                            </div>
                            {% endif %}
                        </a>
                    </div>
                    {% endif %}
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>